var P=Object.defineProperty;var R=(n,t,e)=>t in n?P(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var b=(n,t,e)=>(R(n,typeof t!="symbol"?t+"":t,e),e),B=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)};var h=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)};var c=(n,t,e)=>(B(n,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();var C,E,q,G,L,k,S,I,f,v,w,A;class D{constructor(){h(this,C);h(this,q);h(this,L);h(this,S);h(this,f);h(this,w);this.container=document.querySelector(".loader"),this.paths=document.querySelectorAll(".car-svg path"),this.maxLength=0,this.keyframe=[],this.timing={duration:3e3,iterations:1/0,direction:"alternate"},this.animations=[]}render(){c(this,w,A).call(this),this.container.style.display="grid"}hide(){this.container.style.display="none",c(this,f,v).call(this)}init(){var t,e,r;c(r=c(e=c(t=c(this,C,E).call(this),q,G).call(t),L,k).call(e),S,I).call(r).render()}}C=new WeakSet,E=function(){const t=Array.from(this.paths).map(e=>e.getTotalLength());return this.maxLength=Math.floor(Math.max(...t)),this},q=new WeakSet,G=function(){return this.paths.forEach(t=>{const e=t;e.style.stroke="var(--secondary-color)",e.style.strokeDasharray=Math.floor(this.maxLength/2),e.style.strokeDashoffset=0}),this},L=new WeakSet,k=function(){return this.keyframe=[{strokeDashoffset:this.maxLength},{strokeDashoffset:0}],this},S=new WeakSet,I=function(){return this.animations=Array.from(this.paths).map(t=>t.animate(this.keyframe,this.timing)),c(this,f,v).call(this),this},f=new WeakSet,v=function(){this.animations.forEach(t=>t.pause())},w=new WeakSet,A=function(){this.animations.forEach(t=>t.play())};const H=(n,t)=>{let e;return(...r)=>{clearTimeout(e),e=setTimeout(()=>{n(...r)},t)}},d=n=>n.replace(/\s/g,"").toLowerCase();class J{constructor(){b(this,"renderSuggestions",H((t,e)=>{if(e.target.value==="")return;t(e.target.value).forEach(s=>{this.createSuggestionCard(s)})},150));this.input=document.querySelector("#guess-input"),this.suggestionContainer=document.querySelector(".suggestions"),this.guessContainer=document.querySelector(".guesses"),this.restartBtn=document.querySelector(".fa-rotate"),this.infoContainer=document.querySelector(".info-settings"),this.instructionsBtn=document.querySelector(".fa-gear"),this.unitOptions=document.querySelectorAll("#units option")}reset(){this.clearGuesses(),this.enableInput(),this.resetSuggestionContainer(),this.restartBtn.style.display="none"}resetInput(){this.input.value=""}disableInput(){this.input.disabled=!0}enableInput(){this.input.disabled=!1}resetSuggestionContainer(){this.suggestionContainer.innerHTML=""}inputShake(){this.input.classList.remove("input-shake"),requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.input.classList.add("input-shake")})})}static Suggestion(t){const e=document.createElement("button");return e.classList.add("suggestion"),(t==null?void 0:t.type)==="error"?(e.classList.add("suggestion-error"),e.tabIndex="-1"):(t==null?void 0:t.type)==="suggestion"&&(e.dataset.type="suggestion"),e}static GuessCard(){const t=document.createElement("div");t.classList.add("guess");const e=document.createElement("p");return e.classList.add("name"),t.appendChild(e),t}createSuggestionCard(t){const e=this.constructor.Suggestion({type:"suggestion"});e.textContent=t.manufacturer,this.suggestionContainer.appendChild(e)}renderInvalidGuessSuggestion(){const t=this.constructor.Suggestion({type:"error"});t.textContent="not a manufacturer",this.suggestionContainer.appendChild(t)}renderAlreadyGuessedSuggestion(){const t=this.constructor.Suggestion({type:"error"});t.textContent="already guessed",this.suggestionContainer.appendChild(t)}renderOutOfGuesses(){const t=this.constructor.Suggestion({type:"error"});t.textContent="out of guesses",this.suggestionContainer.appendChild(t)}renderWinCard(t){const e=this.constructor.GuessCard();e.classList.add("guess-correct"),e.firstElementChild.textContent=`${t} is correct!`,this.guessContainer.insertAdjacentElement("afterbegin",e)}renderLossCard(t){const e=this.constructor.GuessCard();e.classList.add("guess-loss"),e.firstElementChild.textContent=`${t.manufacturer} was correct!`,this.guessContainer.insertAdjacentElement("afterbegin",e)}renderValidGuessCard(t,e,r){const s=this.constructor.GuessCard();s.firstElementChild.textContent=t;const a=document.createElement("div");a.classList.add("indicators");const o=document.createElement("p");o.classList.add("distance"),o.textContent=e;const u=document.createElement("p");u.classList.add("arrow","direction"),u.innerHTML="&rarr;",u.style.transform=`rotate(-${r}deg)`,a.appendChild(o),a.appendChild(u),s.appendChild(a),this.guessContainer.insertAdjacentElement("afterbegin",s)}renderRestartBtn(){this.restartBtn.style.display="block"}clearGuesses(){this.guessContainer.innerHTML=""}toggleInfoSettingsPanel(){this.infoContainer.classList.toggle("info-settings-hidden"),this.infoContainer.classList.toggle("info-settings-shown")}bindOnInputChange(t){this.input.addEventListener("input",e=>{this.resetSuggestionContainer(),this.renderSuggestions(t,e)})}bindSuggestionEvent(t){document.addEventListener("click",e=>{e.target.dataset.type==="suggestion"&&(this.resetSuggestionContainer(),t(e.target.textContent))}),document.addEventListener("keydown",e=>{e.key==="Enter"&&e.target.dataset.type==="suggestion"&&(this.resetSuggestionContainer(),t(e.target.textContent))})}bindGuessInput(t){this.input.addEventListener("keydown",e=>{if(e.key==="Enter"){if(e.target.value==="")return;this.resetSuggestionContainer(),t(e.target.value),this.resetInput(e)}})}bindRestartGame(t){this.restartBtn.addEventListener("click",()=>{t()}),this.restartBtn.addEventListener("keydown",e=>{e.key==="Enter"&&t()})}bindToggleInstructions(){this.instructionsBtn.addEventListener("click",()=>{this.toggleInfoSettingsPanel()})}bindChangeUnits(t){this.unitOptions.forEach(e=>{e.addEventListener("click",r=>{t(r.target.value)})})}}const K=[{id:1,manufacturer:"Acura",hq:"Tokyo, Japan"},{id:2,manufacturer:"Alfa Romeo",hq:"Turin, Italy"},{id:3,manufacturer:"Audi",hq:"Ingolstadt, Germany"},{id:4,manufacturer:"BMW",hq:"Munich, Germany"},{id:5,manufacturer:"Buick",hq:"Detroit, Michigan"},{id:6,manufacturer:"Cadillac",hq:"Warren, Michigan"},{id:7,manufacturer:"Chevrolet",hq:"Detroit, Michigan"},{id:8,manufacturer:"Chrysler",hq:"Auburn Hills, Michigan"},{id:9,manufacturer:"Dodge",hq:"Auburn Hills, Michigan"},{id:10,manufacturer:"Ford",hq:"Dearborn, Michigan"},{id:11,manufacturer:"Genesis",hq:"Fountain Valley, California"},{id:12,manufacturer:"GMC",hq:"Detroit, Michigan"},{id:13,manufacturer:"Honda",hq:"Tokyo, Japan"},{id:14,manufacturer:"Hyundai",hq:"Seoul, South Korea"},{id:15,manufacturer:"Infiniti",hq:"Yokohama, Kanagawa, Japan"},{id:16,manufacturer:"Jaguar",hq:"Coventry, United Kingdom"},{id:17,manufacturer:"Jeep",hq:"Toledo, Ohio"},{id:18,manufacturer:"Kia",hq:"Seoul, South Korea"},{id:19,manufacturer:"Land Rover",hq:"Coventry, United Kingdom"},{id:20,manufacturer:"Lexus",hq:"Nagoya, Japan"},{id:21,manufacturer:"Lincoln",hq:"Radnor, Pennsylvania"},{id:22,manufacturer:"Maserati",hq:"Modena, Italy"},{id:23,manufacturer:"Mazda",hq:"Fuchu, Hiroshima, Japan"},{id:24,manufacturer:"Mercedes Benz",hq:"Stuttgart, Germany"},{id:25,manufacturer:"MINI",hq:"Oxford, England"},{id:26,manufacturer:"Mitsubishi",hq:"Tokyo, Japan"},{id:27,manufacturer:"Nissan",hq:"Yokohama, Kanagawa, Japan"},{id:28,manufacturer:"Pontiac",hq:"Detroit, Michigan"},{id:29,manufacturer:"Porsche",hq:"Stuttgart, Germany"},{id:30,manufacturer:"RAM",hq:"Auburn Hills, Michigan"},{id:31,manufacturer:"Subaru",hq:"Tokyo, Japan"},{id:32,manufacturer:"Tesla",hq:"Austin, Texas"},{id:33,manufacturer:"Toyota",hq:"Toyota, Aichi, Japan"},{id:34,manufacturer:"Volkwagen",hq:"Wolfsburg, Germany"},{id:35,manufacturer:"Volvo",hq:"Gothenburg, Sweden"}];class ${constructor(){this.list=K,this.answer=this.list[this.randomIndex()]}randomIndex(){return Math.floor(Math.random()*this.list.length)}setAnswer(){this.answer=this.list[this.randomIndex()]}}class F extends ${constructor(){super(),this.last="",this.history=[],this.count=0}getCount(){return this.count}reset(){this.count=0,this.history.length=0,this.setAnswer()}getMatchingManufacturers(t){return this.list.filter((r,s)=>d(this.list[s].manufacturer).includes(d(t)))}inList(){return this.list.find(t=>d(t.manufacturer)===d(this.last))}addGuessToHistory(t){this.history.unshift(d(t))}previouslySubmitted(t){return this.history.some(e=>e===d(t))}matchesAnswer(){return d(this.last)===d(this.answer.manufacturer)}increaseCount(){this.count+=1}}const N="b822c6c2a2f2f749e1c7b6aa16ea6f97";class U{constructor(){this.locations=[],this.key=N,this.endpoint="http://api.openweathermap.org/geo/1.0/direct?",this.coordinates={guess:{},answer:{}},this.units="mi"}setUnits(t){this.units=t}reset(){Object.keys(this.coordinates).forEach(t=>{this.coordinates[t]={}})}convertDistance(t){return this.units==="km"?Math.round(t*1.60934):Math.round(t*.621371)}static convertToRadians(t){return t*Math.PI/180}getLocation(t){return fetch(`${this.endpoint}q=${t}&limit=1&appid=${this.key}`)}async getCoordinates(t,e){try{const r=await Promise.all([this.getLocation(t),this.getLocation(e)]),a=(await Promise.all(r.map(o=>o.json()))).map(o=>{var u,i;return{lat:(u=o[0])==null?void 0:u.lat,lon:(i=o[0])==null?void 0:i.lon}});[this.coordinates.guess,this.coordinates.answer]=a}catch(r){throw new Error(r)}}degreeToRadians(){const t=structuredClone(this.coordinates);return Object.keys(t).forEach(e=>{t[e].lat=this.constructor.convertToRadians(t[e].lat),t[e].lon=this.constructor.convertToRadians(t[e].lon)}),t}distanceBetweenGuessAnswer(){const t=this.degreeToRadians(),e=t.answer.lat-t.guess.lat,r=t.answer.lon-t.guess.lon,s=Math.sin(e/2)**2+Math.cos(t.guess.lat)*Math.cos(t.answer.lat)*Math.sin(r/2)**2,a=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),o=this.units==="mi"?3956:6371;return`${Math.round(a*o)} ${this.units}`}angleFromGuessToAnswer(){const t=this.degreeToRadians(),e=t.answer.lat-t.guess.lat,r=t.answer.lon-t.guess.lon;let s=Math.atan2(e,r);return s*=180/Math.PI,s<0&&(s=360+s),Math.round(s)}}const y={loader:new D},V=()=>{const n=new F,t=new U,e=new J,r=i=>n.getMatchingManufacturers(i),s=async i=>{n.last=i;const l=()=>{e.renderInvalidGuessSuggestion(),e.inputShake()},g=()=>{e.renderAlreadyGuessedSuggestion(),e.inputShake()},p=()=>{n.getCount()===5&&!n.matchesAnswer()&&(e.renderLossCard(n.answer),e.renderOutOfGuesses(),e.disableInput(),e.renderRestartBtn())},M=m=>{e.renderWinCard(m),e.disableInput(),e.renderRestartBtn()},T=async()=>{y.loader.render();const m=n.inList();n.addGuessToHistory(m.manufacturer),await t.getCoordinates(m.hq,n.answer.hq);const x=t.distanceBetweenGuessAnswer(),O=t.angleFromGuessToAnswer();n.increaseCount(),y.loader.hide(),e.renderValidGuessCard(m.manufacturer,x,O),setTimeout(()=>p(),750)};if(!n.inList()){l();return}if(n.previouslySubmitted(i)){g();return}if(n.matchesAnswer(i)){M(i);return}T()},a=i=>{e.input.value=i,e.input.focus()},o=()=>{n.reset(),t.reset(),e.reset()},u=i=>{if(i===t.units)return;t.setUnits(i);const l=e.guessContainer.children;if(l.length>0)for(let g=0;g<l.length;g+=1){const p=l[g].children[1].children[0],M=p.textContent.split(" ")[0];p.textContent=`${t.convertDistance(M)} ${i}`}e.toggleInfoSettingsPanel()};e.bindOnInputChange(r),e.bindSuggestionEvent(a),e.bindGuessInput(s),e.bindRestartGame(o),e.bindToggleInstructions(),e.bindChangeUnits(u)};document.addEventListener("DOMContentLoaded",async()=>{y.loader.init(),await new Promise(n=>{setTimeout(()=>{y.loader.hide(),n()},1e3)}),V()});
